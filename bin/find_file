#!/bin/bash

header="ğŸ“ FILE FINDER
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“ ENTER: echo path | ğŸš€ CTRL-O: open in nvim | ğŸ“‹ CTRL-Y: copy path | ESC: exit"

selection=$(fd --type f --hidden --exclude .git |
    fzf --tmux 95%,85% \
        --header="$header" \
        --prompt="Select file ğŸ“ " \
        --bind "ctrl-y:execute-silent(echo {} | clipcopy)" \
        --expect=ctrl-o)

rm -f "$preview_mode_file"

key=$(echo "$selection" | head -1)
selected_file=$(echo "$selection" | tail -1)

if [[ -z "$selected_file" ]]; then exit 0; fi

case "$key" in
ctrl-o) nvim "$selected_file" ;;
*) echo "$selected_file" ;;
esac
